# MyAdBlock

サイト別制御機能付き広告ブロッカーChrome拡張機能です。

## 概要

このブラウザ拡張機能は、ウェブページ上の広告要素を自動的に検出・非表示にします。
サイトごとに広告ブロックの有効/無効を切り替えたり、特定のサイトを永続的にホワイトリストに追加したりすることができます。

## 機能

### 基本機能
- 広告要素の自動検出と非表示
- スキップボタンの自動クリック
- DOM変更の監視による動的広告対応
- 3秒間隔の定期的自動チェック
- パフォーマンス最適化された処理

### サイト別制御機能
- **サイトごとのON/OFF**: ポップアップのトグルスイッチで、現在のサイトの広告ブロックを一時的に無効化できます。
- **ホワイトリスト**: ポップアップのボタンから、サイトを永続的に広告ブロックの対象外に設定できます。
- サイトごとの設定を自動保存
- ブロック統計のリアルタイム表示
- 設定リセット機能

### アイコン表示機能
- **緑のアイコン**: 広告ブロック有効
- **グレーのアイコン**: 広告ブロック無効（サイトごと設定またはホワイトリストによる）
- ツールバーで一目で状態確認可能

## ファイル構成

- `manifest.json` - 拡張機能の設定ファイル
- `script.js` - メインのコンテンツスクリプト（AdBlockerクラス）
- `background.js` - バックグラウンドスクリプト（アイコン状態制御）
- `popup.html` - ポップアップUIのHTML
- `popup.css` - ポップアップUIのスタイル
- `popup.js` - ポップアップUIの制御スクリプト
- `icons/` - アイコンファイル（active/inactive状態別）

## インストール方法

1. Chromeの拡張機能管理画面を開く（chrome://extensions/）
2. 「デベロッパーモード」を有効にする
3. 「パッケージ化されていない拡張機能を読み込む」をクリック
4. このフォルダを選択

## 使い方

### ポップアップ機能

拡張機能のアイコンをクリックすると、ポップアップが開き、以下の操作ができます。

- **トグルスイッチ**: 現在のサイトでの広告ブロックを有効または無効にします。この設定は永続的に保存されます。
- **ブロック数表示**: 現在のページでブロックした広告数を表示します。
- **「このサイトをホワイトリストに追加/削除」ボタン**: 現在のサイトを永続的なホワイトリストに登録、またはリストから削除します。ホワイトリストに登録されたサイトでは、広告ブロックは常に無効になります。
- **「サイト設定リセット」ボタン**: 現在のサイトに対するすべての設定（サイトごとのON/OFF、ホワイトリスト）をリセットします。

### 設定の優先順位

1.  **ホワイトリスト**: ホワイトリストに登録されているサイトでは、常に広告ブロックが無効になります。
2.  **サイトごとのON/OFF設定**: ホワイトリストに登録されていないサイトで、広告ブロックを無効にしている場合に適用されます。

### 自動ブロック機能の詳細
広告は以下のタイミングで自動的にブロックされます：

1. **ページ読み込み直後**: 即座にブロック開始
2. **DOM完了時**: DOMContentLoadedイベントで再チェック
3. **完全読み込み時**: window.loadイベントで再チェック
4. **DOM変更時**: MutationObserverによる即座の検出
5. **定期チェック**: 3秒間隔での自動実行

### 開発者向け
統計情報は開発者コンソールで確認できます：

```javascript
// 統計情報の確認
window.adBlockerInstance.getStats()
```

## 注意事項

この拡張機能は研究・学習目的で作成されています。適切な利用を心がけてください。

## 参考

Claud Proに作ってもらいました。

[Chrome拡張を自作しよう！広告ブロック編](https://rcie.hatenablog.com/entry/2024/05/21/212159)
